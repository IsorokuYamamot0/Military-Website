<!-- This website is made by Nishil Singh June 1 2025-->
<!-- This was made from ai as I had no clue what I was doing.-->
<!DOCTYPE html>
<html lang="en">
{% extends "layout.html" %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
<h2>{{ title }}</h2>

{% if vehicles %}
<!-- Show number of vehicles found -->
    <p>Displaying {{ vehicles|length }} vehicle(s) in our database.</p>
    <div class="vehicle-list">
        {% for vehicle in vehicles %}
            <div class="weapon-item">
                <!-- Display vehicle name, type, role, year introduced, and description -->
                <h3>{{ vehicle.name }}</h3>
                <p><strong>Type:</strong> {{ vehicle.type }}</p>
                {% if vehicle.role %}
                <p><strong>Role:</strong> {{ vehicle.role }}</p>
                {% endif %}
                {% if vehicle.year_introduced %}
                <p><strong>Year Introduced:</strong> {{ vehicle.year_introduced }}</p>
                {% endif %}
                <p><strong>Description:</strong> {{ vehicle.description }}</p>
                <!-- Display countries that operate this vehicle -->
                <p><strong>Operated by:</strong> 
                    {% for country in vehicle.countries %}
                        {{ country.name }}{% if not loop.last %}, {% endif %}
                    {% else %}
                        No countries assigned.
                    {% endfor %}
                </p>

                <!-- Action buttons for Edit, Delete, and Favorite -->
                <div class="vehicle-actions">
                    {% if current_user.is_authenticated %}
                        {% if current_user.is_admin %} {# Only show if logged in AND admin #}
                            {% if 'Tanks' in title %}
                            <!-- Edit tank link -->
                                <a href="{{ url_for('edit_tank', id=vehicle.id) }}" class="menu-button-edit">Edit</a>
                                <!-- Delete tank form with confirmation -->
                                <form action="{{ url_for('delete_tank', id=vehicle.id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this tank?');">
                                    <button type="submit" class="menu-button-delete">Delete</button>
                                </form>
                            {% elif 'Aircraft' in title %}
                            <!-- Edit aircraft link -->
                                <a href="{{ url_for('edit_plane', id=vehicle.id) }}" class="menu-button-edit">Edit</a>
                                <!-- Delete aircraft form with confirmation -->
                                <form action="{{ url_for('delete_plane', id=vehicle.id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this aircraft?');">
                                    <button type="submit" class="menu-button-delete">Delete</button>
                                </form>
                            {% endif %}
                        {% else %} {# For regular users #}
                            {% if 'Tanks' in title %}
                                {% if vehicle in current_user.favorite_tanks %}
                                    <form action="{{ url_for('unfavorite_tank', tank_id=vehicle.id) }}" method="post">
                                        <button type="submit" class="menu-button-secondary">Unfavorite</button>
                                    </form>
                                {% else %}
                                    <form action="{{ url_for('favorite_tank', tank_id=vehicle.id) }}" method="post">
                                        <button type="submit" class="menu-button-edit">Favorite</button>
                                    </form>
                                {% endif %}
                            {% elif 'Aircraft' in title %}
                                {% if vehicle in current_user.favorite_planes %}
                                    <form action="{{ url_for('unfavorite_plane', plane_id=vehicle.id) }}" method="post">
                                        <button type="submit" class="menu-button-secondary">Unfavorite</button>
                                    </form>
                                {% else %}
                                    <form action="{{ url_for('favorite_plane', plane_id=vehicle.id) }}" method="post">
                                        <button type="submit" class="menu-button-edit">Favorite</button>
                                    </form>
                                {% endif %}
                            {% endif %} {# This endif was missing #}
                        {% endif %} {# This endif was missing #}
                    {% endif %} {# This endif was missing #}
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No vehicles found in the database yet.</p>
{% endif %}
{% endblock %}
</html>